(function(t){function r(t,r){switch(r){case C:(t%1||-128>t||t>=128)&&e(r);break;case p:(t%1||0>t||t>=256)&&e(r);break;case y:(t%1||-32768>t||t>=32768)&&e(r);break;case v:(t%1||0>t||t>=65536)&&e(r);break;case B:(t%1||t<-Math.pow(2,31)||t>=Math.pow(2,31))&&e(r);break;case E:(t%1||0>t||t>=Math.pow(2,32))&&e(r);break;case I:var f,n,i=t;i=Math.abs(i),n=Math.log(i)/Math.log(2),n=0>n?Math.ceil(n):Math.floor(n),f=105+n,(0>f||f>255)&&e(r),i*=Math.pow(2,-n+23),i%1&&e(r);break;case w:break;case U:"string"!=typeof t&&e(r)}}function e(t){throw Error("Type assertion failure, check that your value is actually of type "+f(t)+".")}function f(t){return t===(d|p)?"char":t===p?"unsigned char":t===(d|v)?"short":t===v?"unsigned short":t===(d|E)?"int":t===E?"unsigned int":t===I?"float":t===w?"double":t===U?"string":void 0}function n(t){if(!(this instanceof n))return new n(t);if(this.buffer="","string"==typeof t)this.write(t,0);else if(Array.isArray(t))for(var r=0;r<t.length;++r)this.writeUInt8(t[r],r);else n.isStringBuffer(t)&&(this.buffer=t.buffer)}function u(t){var r="";if(t.length<2)for(var e=t.length;2>e;++e)r+="0";return r+=t}function h(t){var r=(128&t[0])>>>7,e=((127&t[0])<<1)+((128&t[1])>>>7),f=0;for(t[1]&=127,i=0;i<=2;++i)f+=t[i+1]<<8*(2-i);return f|=8388608,a(r?-f:f,e-150)}function s(t){var r=(128&t[0])>>>7,e=((127&t[0])<<4)+((240&t[1])>>>4),f=0;for(t[1]&=15,i=0;i<=6;++i)f+=a(t[i+1],8*(6-i));return f+=4503599627370496,a(r?-f:f,e-1075)}function o(t,r){var e=[];if(r===p)return e.push(t),e;if(r===(d|p))return 0>t?o(b(-t,8),p):o(t,p);if(r===v)return e.push(t>>>8),e.push(255&t),e;if(r===(d|v))return 0>t?o(b(-t,16),v):o(t,v);if(r===E)return e.push(t>>>24&255),e.push(t>>>16&255),e.push(t>>>8&255),e.push(255&t),e;if(r===(d|E))return 0>t?o(b(-t,32),E):o(t,E);if(r===I){t=+t;var f,n,i=127,u=t;return f=0>u?1:0,u=Math.abs(u),n=Math.log(u)/Math.log(2),n=n>0?Math.floor(n):Math.ceil(n),u*=Math.pow(2,-n+23),i+=n,u=Math.round(u),u&=8388607,e.push(f<<7),e[0]+=(254&i)>>>1,e.push((1&i)<<7),e[1]+=u>>>16&127,e.push(u>>>8&255),e.push(255&u),e}if(r===w){t=+t;var f,n,i=1023,u=t;f=0>u?1:0,u=Math.abs(u),n=Math.log(u)/Math.log(2),n=n>0?Math.floor(n):Math.ceil(n),u*=Math.pow(2,-n+52),i+=n,u=Math.round(u),u=parseInt(u.toString(2).substr(1),2),e.push(f<<7),e[0]+=i>>>4,e.push((15&i)<<4),e[1]+=15&Math.floor(a(u,-48));for(var h=40,s=0;6>s;++s,h-=8)e.push(255&Math.floor(a(u,-h)));return e}}function a(t,r){var e=0;if(r>0)for(;r>e;)t*=2,e++;else for(r=-r;r>e;)t/=2,e++;return t}function b(t,r){return r>31||!r?~t:(t^c(r))+1}function c(t){return(1<<t)-1}function l(t,r,e){for(var f=t.length-1;f>=0&&r.apply(e,[t[f],f,t])!==!1;f--);}function g(t,r,e){return 0>t&&0===r.length?0:(-1===t?t=r.length-(e?1:0):0>t&&(t=r.length+(e?0:1)+(t%(r.length+ +!e)===0?-(r.length+!e):t%(r.length+(e?0:1)))),t)}var t=this,d=1,p=0,v=2,E=4,I=8,w=24,U=32,C=1,y=3,B=5;n.concat=function(t){return n(t.reduce(function(t,r){return t+r.buffer},""))},n.isStringBuffer=function(t){return t instanceof n},n.fromBlob=function(t,r){try{var e=n(),f=new FileReader;f.addEventListener("loadend",function(){for(var t=new Uint8Array(f.result),n=0;n<t.length;++n)e.writeUInt8(t[n],-1);r(null,e)}),f.readAsArrayBuffer(t)}catch(i){r(i)}},n.fromFile=function(t,r){return n.fromBlob(t.slice(),r)},n.byteLength=function(t,r){r||(r="ascii");var e;switch(t+="",r){case"ascii":case"binary":case"raw":e=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":e=2*t.length;break;case"hex":e=t.length>>>1;break;default:e=t.length}return e},n.INSPECT_MAX_BYTES=50,n.prototype={writeUInt8:function(t,e){return t=+t,r(t,p),e=g(e,this.buffer),e===this.buffer.length?this.buffer+=String.fromCharCode(t):this.buffer=this.buffer.substr(0,e)+String.fromCharCode(t)+this.buffer.substr(e+1),e+1},writeInt8:function(t,e){return t=+t,r(t,d|p),t=0>t?b(-t,8):t,e=g(e,this.buffer),e===this.buffer.length?this.buffer+=String.fromCharCode(t):this.buffer=this.buffer.substr(0,e)+String.fromCharCode(t)+this.buffer.substr(e+1),e+1},writeUInt16LE:function(t,e){t=+t,r(t,v);var f=o(t,v),n="";return l(f,function(t){n+=String.fromCharCode(t)}),e=g(e,this.buffer),e>=this.buffer.length||-1===e?this.buffer+=n:this.buffer=this.buffer.substr(0,e)+n+this.buffer.substr(e+2),e+2},writeUInt16BE:function(t,e){t=+t,r(t,v);var f=o(t,v),n="";return f.forEach(function(t){n+=String.fromCharCode(t)}),e=g(e,this.buffer),e>=this.buffer.length||-1===e?this.buffer+=n:this.buffer=this.buffer.substr(0,e)+n+this.buffer.substr(e+2),e+2},writeInt16LE:function(t,e){return t=+t,r(t,d|v),t=0>t?b(-t,16):t,0>e&&(e=this.buffer.length-(e+1)%this.buffer.length),this.writeUInt16LE(t,e)},writeInt16BE:function(t,e){return t=+t,r(t,d|v),t=0>t?b(-t,16):t,0>e&&(e=this.buffer.length-(e+1)%this.buffer.length),this.writeUInt16BE(t,e)},writeUInt32LE:function(t,e){t=+t;var f=o(t,E),n="";r(t,E),l(f,function(t){n+=String.fromCharCode(t)}),e=g(e,this.buffer),e===this.buffer.length||-1===e?this.buffer+=n:this.buffer=this.buffer.substr(0,e)+n+this.buffer.substr(e+4)},writeUInt32BE:function(t,e){t=+t,r(t,E);var f=o(t,E),n="";f.forEach(function(t){n+=String.fromCharCode(t)}),e=g(e,this.buffer),e===this.buffer.length||-1===e?this.buffer+=n:this.buffer=this.buffer.substr(0,e)+n+this.buffer.substr(e+4)},writeInt32LE:function(t,e){return t=+t,r(t,d|E),t=0>t?b(-t,32):t,this.writeUInt32LE(t,e)},writeInt32BE:function(t,e){return t=+t,r(t,d|E),t=0>t?b(-t,32):t,this.writeUInt32BE(t,e)},writeFloatLE:function(t,e){r(t,I);var f=o(t,I);e=g(e,this.buffer);for(var n=f.length-1;n>=0;--n)this.writeUInt8(f[n],e+(f.length-1-n));return e+4},writeFloatBE:function(t,e){r(t,I);var f=o(t,I);return e=g(e,this.buffer),f.forEach(function(t,r){this.writeUInt8(t,e+r)},this),e+4},writeDoubleLE:function(t,e){r(t,w);var f=o(t,w);for(e=g(e,this.buffer),i=f.length-1;i>=0;--i)this.writeUInt8(f[i],e+(f.length-1-i));return e+8},writeDoubleBE:function(t,e){r(t,w);var f=o(t,w);return e=g(e,this.buffer),f.forEach(function(t,r){this.writeUInt8(t,e+r)},this),e+8},readUInt8:function(t){return t=g(t,this.buffer,!0),this.buffer.charCodeAt(t)},readInt8:function(t){var r=this.buffer.charCodeAt(t);return 128&r?-b(r,8):r},readUInt16LE:function(t){return t=g(t,this.buffer,!0),this.buffer.charCodeAt(t)|this.buffer.charCodeAt(t+1)<<8},readUInt16BE:function(t){return t=g(t,this.buffer,!0),this.buffer.charCodeAt(t)<<8|this.buffer.charCodeAt(t+1)},readInt16LE:function(t){var r=this.readUInt16LE(t);return 32768&r?-b(r,16):r},readInt16BE:function(t){var r=this.readUInt16BE(t);return 32768&r?-b(r,16):r},readUInt32LE:function(t){return t=g(t,this.buffer,!0),0>t&&(t=this.buffer.length-(t+1)%this.buffer.length),this.buffer.charCodeAt(t)|this.buffer.charCodeAt(t+1)<<8|this.buffer.charCodeAt(t+2)<<16|this.buffer.charCodeAt(t+3)<<24},readUInt32BE:function(t){return t=g(t,this.buffer,!0),this.buffer.charCodeAt(t)<<24|this.buffer.charCodeAt(t+1)<<16|this.buffer.charCodeAt(t+2)<<8|this.buffer.charCodeAt(t+3)},readInt32LE:function(t){var r=this.readUInt32LE(t);return 2147483648&r?-b(r,32):r},readInt32BE:function(t){var r=this.readUInt32BE(t);return 2147483648&r?-b(r,32):r},readFloatLE:function(t){var r=[];t=g(t,this.buffer,!0);for(var e=0;4>e;++e)r.push(this.readUInt8(t+e));return r.reverse(),h(r)},readFloatBE:function(t){var r=[];t=g(t,this.buffer,!0);for(var e=0;4>e;++e)r.push(this.readUInt8(t+e));return h(r)},readDoubleLE:function(t){var r=[];t=g(t,this.buffer,!0);for(var e=0;8>e;++e)r.push(this.readUInt8(t+e));return r.reverse(),s(r)},readDoubleBE:function(t){var r=[];t=g(t,this.buffer,!0);for(var e=0;8>e;++e)r.push(this.readUInt8(t+e));return s(r)},fill:function(t,r,e){"string"==typeof t&&(t=t.charCodeAt(0)),r||(r=0),e||(e=this.length),r=g(r,this.buffer),e=g(e,this.buffer);for(var f="",n=r;e>n;++n)f+=String.fromCharCode(t);return this.buffer=this.buffer.substr(0,r)+f+this.buffer.substr(e),this},slice:function(t,r){t||(t=0),r||(r=this.length),t=g(t,this.buffer,!0),r=g(r,this.buffer,!0);var e=n();return e.buffer=this.buffer.substr(t,r-t),e},copy:function(t,r,e,f){return r||(r=0),e||(e=0),f||(f=this.length),0>r&&(r=this.buffer.length-(r+1)%this.buffer.length),e=g(e,this.buffer,!0),f=g(f,this.buffer,!0),r=g(r,this.buffer),0>e&&(e=this.buffer.length-(e+1)%this.buffer.length),0>f&&(f=this.buffer.length-(f+1)%this.buffer.length),t.buffer=t.buffer.substr(0,r)+this.buffer.substr(e,f-e)+t.buffer.substr(r+f-e),this},equals:function(t){return this.buffer===t.buffer},toJSON:function(){return JSON.stringify(this.buffer)},toString:function(){return this.buffer},write:function(t,r){r=g(r,this.buffer);for(var e=0;e<t.length;++e)this.writeUInt8(t.charCodeAt(e),r+e)},inspect:function(){return"<StringBuffer "+function(){for(var t="",r=0;r<n.INSPECT_MAX_BYTES&&r<this.length;++r)t+=u(this.readUInt8(r).toString(16))+(r===n.INSPECT_MAX_BYTES-1||r===this.length-1?"":" ");return t}.call(this)+">"},get:function(t){return this.buffer.charCodeAt(t)},clear:function(){return this.buffer="",this},toTypedArray:function(t,r){if("undefined"==typeof t||8>t||t>32||t%8)throw Error("Must specify bit size of typed array to be 8, 16, or 32.");if(8===t){for(var e=new Uint8Array(this.length),f=0;f<this.length;++f)e[f]=this.readUInt8(f);return e}if(16===t){for(var e=new Uint16Array(Math.ceil(this.length/2)),f=0;f<this.length;f+=2)e[f]=r?this.readUInt16BE(f):this.readUInt16LE(f);return e}for(var e=new Uint32Array(Math.ceil(this.length/4)),f=0;f<this.length;f+=4)e[f]=r?this.readUInt32BE(f):this.readUInt32LE(f);return e},toBlob:function(t,r){t||(t="application/octet-binary");try{return new Blob([this.toTypedArray(8,r)],{type:t})}catch(e){throw Error("StringBuffer#toBlob only works in the browser.")}}},Object.defineProperty(n.prototype,"length",{get:function(){return this.buffer.length},set:function(t){if(t>this.buffer.length)for(var r=t;r<this.buffer.length;++r)this.buffer+="\x00";t<this.buffer.length&&(this.buffer=this.buffer.substr(0,t))}}),"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports&&(exports=module.exports=n):t.StringBuffer=n}).call(this);